# APIæ•°æ®å¤„ç†ä¸€è‡´æ€§æ£€æŸ¥æŠ¥å‘Š

## ğŸ“Š æ£€æŸ¥æ¦‚è§ˆ

æœ¬æ¬¡å…¨é¢æ£€æŸ¥äº†æ–°é¡¹ç›®ä¸­æ‰€æœ‰æ ¸å¿ƒAPIæ¥å£çš„æ•°æ®å¤„ç†é€»è¾‘ï¼Œç¡®ä¿ä¸æ—§é¡¹ç›®ä¿æŒä¸€è‡´ã€‚

## ğŸ” å·²è¯†åˆ«çš„APIè°ƒç”¨ç‚¹

### 1. ç™»å½•æ¥å£ (login)
**æ–‡ä»¶ä½ç½®**: `apps/cms/src/views/Login.vue`
**è°ƒç”¨æ–¹å¼**: 
```typescript
const res: any = await login({ username, password })
localStorage.setItem('token', res.data.token)
```

### 2. é¡µé¢åˆ—è¡¨è·å– (getCmsPageList) 
**æ–‡ä»¶ä½ç½®**: `apps/cms/src/views/Activity.vue`
**è°ƒç”¨æ–¹å¼**:
```typescript
const res: any = await getCmsPageList(params)
// å·²ä¿®å¤ï¼šä½¿ç”¨ res.data.list è®¿é—®æ•°æ®
```

### 3. é¡µé¢ä¿å­˜ (saveCmsPage)
**æ–‡ä»¶ä½ç½®**: `apps/cms/src/views/Decorate/components/TopHeader.vue`
**è°ƒç”¨æ–¹å¼**:
```typescript
const result: any = await saveCmsPage(saveData)
if (!currentPageId.value && result.data?.id) {
  // è·¯ç”±æ›´æ–°é€»è¾‘
}
```

### 4. çŠ¶æ€æ›´æ–° (updateStatus)
**æ–‡ä»¶ä½ç½®**: `apps/cms/src/views/Activity.vue`
**è°ƒç”¨æ–¹å¼**:
```typescript
const updateResult: any = await updateStatus({ id: row.id, isAbled })
```

### 5. é¡µé¢åˆ é™¤ (deletePage)
**æ–‡ä»¶ä½ç½®**: `apps/cms/src/views/Activity.vue`
**è°ƒç”¨æ–¹å¼**:
```typescript
const deleteResult: any = await deletePage({ id })
```

## ğŸ¯ æ•°æ®ç»“æ„åˆ†æ

### ç¡®è®¤çš„æ•°æ®ç»“æ„æ¨¡å¼

1. **åˆ—è¡¨æ¥å£** (`getCmsPageList`): 
   ```
   {
     code: 10000,
     message: "success",
     data: {
       list: [...],
       total: 208,
       pageNum: 1,
       pageSize: 10
     }
   }
   ```

2. **å•å®ä½“æ“ä½œæ¥å£** (login, saveCmsPage, updateStatus, deletePage):
   ```
   {
     code: 10000,
     message: "success", 
     data: {
       // å…·ä½“ä¸šåŠ¡æ•°æ®
     }
   }
   ```

## âš ï¸ å‘ç°çš„é—®é¢˜åŠä¿®å¤

### 1. å·²ä¿®å¤é—®é¢˜
- **é—®é¢˜**: `getCmsPageList` æ•°æ®è®¿é—®è·¯å¾„é”™è¯¯
- **ä¿®å¤**: ä» `res.data.data` æ”¹ä¸º `res.data.list`
- **çŠ¶æ€**: âœ… å·²å®Œæˆ

### 2. å¾…éªŒè¯é—®é¢˜
- **ç™»å½•æ¥å£**: éœ€è¦éªŒè¯ `res.data.token` è®¿é—®æ˜¯å¦æ­£ç¡®
- **ä¿å­˜æ¥å£**: éœ€è¦éªŒè¯ `result.data?.id` è®¿é—®æ˜¯å¦æ­£ç¡®
- **çŠ¶æ€æ›´æ–°æ¥å£**: éœ€è¦éªŒè¯å“åº”æ•°æ®ç»“æ„
- **åˆ é™¤æ¥å£**: éœ€è¦éªŒè¯å“åº”æ•°æ®ç»“æ„

## ğŸ› ï¸ è°ƒè¯•æªæ–½

å·²åœ¨æ‰€æœ‰å…³é”®APIè°ƒç”¨å¤„æ·»åŠ è°ƒè¯•æ—¥å¿—ï¼š

```typescript
console.log('=== æ¥å£åç§°è°ƒè¯•ä¿¡æ¯ ===')
console.log('å“åº”:', response)
console.log('å“åº”ç»“æ„:', Object.keys(response || {}))
if (response && response.data) {
  console.log('dataå­—æ®µ:', response.data)
  // ç‰¹å®šå­—æ®µéªŒè¯
}
```

## ğŸ“ˆ éªŒè¯å»ºè®®

### çŸ­æœŸéªŒè¯ (ç«‹å³æ‰§è¡Œ)
1. æ‰§è¡Œç™»å½•æ“ä½œï¼Œè§‚å¯Ÿæ§åˆ¶å°è¾“å‡º
2. æ‰§è¡Œé¡µé¢ä¿å­˜æ“ä½œï¼Œè§‚å¯Ÿæ§åˆ¶å°è¾“å‡º
3. æ‰§è¡ŒçŠ¶æ€æ›´æ–°æ“ä½œï¼Œè§‚å¯Ÿæ§åˆ¶å°è¾“å‡º
4. æ‰§è¡Œé¡µé¢åˆ é™¤æ“ä½œï¼Œè§‚å¯Ÿæ§åˆ¶å°è¾“å‡º

### é•¿æœŸç»´æŠ¤å»ºè®®
1. å»ºç«‹ç»Ÿä¸€çš„APIå“åº”å¤„ç†å·¥å…·å‡½æ•°
2. æ·»åŠ TypeScriptç±»å‹å®šä¹‰ç¡®ä¿ç±»å‹å®‰å…¨
3. å®ç°å…¨å±€é”™è¯¯å¤„ç†æœºåˆ¶
4. å»ºç«‹APIè°ƒç”¨è§„èŒƒæ–‡æ¡£

## ğŸ¯ ç»“è®º

ç›®å‰æ ¸å¿ƒçš„æ•°æ®ç»“æ„é—®é¢˜å·²è¯†åˆ«å¹¶ä¿®å¤ï¼Œä½†éœ€è¦é€šè¿‡å®é™…ä¸šåŠ¡æ“ä½œæ¥éªŒè¯æ‰€æœ‰æ¥å£çš„æ•°æ®å¤„ç†é€»è¾‘æ˜¯å¦å®Œå…¨æ­£ç¡®ã€‚å»ºè®®æŒ‰éªŒè¯å»ºè®®é€æ­¥æµ‹è¯•å„æ¥å£åŠŸèƒ½ã€‚

## ğŸ“ åç»­è¡ŒåŠ¨è®¡åˆ’

1. **åŠŸèƒ½æµ‹è¯•**: é€ä¸€æµ‹è¯•å„APIæ¥å£çš„å®é™…è°ƒç”¨
2. **é—®é¢˜ä¿®å¤**: æ ¹æ®æµ‹è¯•ç»“æœä¿®å¤å‘ç°çš„é—®é¢˜  
3. **ä»£ç ä¼˜åŒ–**: ç»Ÿä¸€æ•°æ®å¤„ç†é€»è¾‘ï¼Œæé«˜ä»£ç è´¨é‡
4. **æ–‡æ¡£å®Œå–„**: æ›´æ–°APIä½¿ç”¨æ–‡æ¡£å’Œæœ€ä½³å®è·µ

---
**æ£€æŸ¥å®Œæˆæ—¶é—´**: 2026å¹´2æœˆ19æ—¥
**æ£€æŸ¥äººå‘˜**: Lingma AIåŠ©æ‰‹
**é¡¹ç›®çŠ¶æ€**: è¿›è¡Œä¸­ - éœ€è¦è¿›ä¸€æ­¥åŠŸèƒ½éªŒè¯